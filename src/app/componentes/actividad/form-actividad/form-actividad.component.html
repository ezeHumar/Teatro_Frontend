<body>
    <div *ngIf="this.submitError">
        <br>
        <div class="alert alert-danger" role="alert">
            {{submitError}}
        </div>
    </div>
    <form (ngSubmit)="onSubmit()" [formGroup]="form">
        <div class="form-group">
            <label for="obra">Obra:</label>
            <ng-select formControlName="obra" [items]="obras" bindLabel="nombre" placeholder="Seleccionar obra"
                appendTo="body" [(ngModel)]="actividad.obra"
                [ngClass]="{'is-invalid':form.get('obra').touched && form.get('obra').invalid}">
            </ng-select>
            <div *ngIf="form.get('obra').touched && form.get('obra').invalid" class="invalid-feedback">
                <div *ngIf="form.get('obra').errors.required">Se requiere seleccionar una obra</div>
            </div>
        </div>

        <div class="form-group">
            <label for="espacio">Espacio:</label>
            <ng-select formControlName="espacio" [items]="espacios" bindLabel="nombre" placeholder="Seleccionar espacio"
                appendTo="body" [(ngModel)]="actividad.espacio"
                [ngClass]="{'is-invalid':form.get('espacio').touched && form.get('espacio').invalid}">
            </ng-select>
            <div *ngIf="form.get('espacio').touched && form.get('espacio').invalid" class="invalid-feedback">
                <div *ngIf="form.get('espacio').errors.required">Se requiere seleccionar un espacio</div>
            </div>
        </div>

        <div class="form-group">
            <label for="date">Fecha</label>
            <input type="date" class="form-control" id="date" placeholder="aaaa-mm-dd" [(ngModel)]="actividad.fecha"
                formControlName="date" [ngClass]="{'is-invalid':form.get('date').touched && form.get('date').invalid}" [min]="fechaHoy">
            <div *ngIf="form.get('date').touched && form.get('date').invalid" class="invalid-feedback">
                <div *ngIf="form.get('date').errors.required">Se requiere una fecha</div>
            </div>
        </div>

        <div class="form-group">
            <label for="time">Hora</label>
            <input type="time" class="form-control" id="time" placeholder="hh:mm" [(ngModel)]="actividad.hora"
                formControlName="time" [ngClass]="{'is-invalid':form.get('time').touched && form.get('time').invalid}">
            <div *ngIf="form.get('time').touched && form.get('time').invalid" class="invalid-feedback">
                <div *ngIf="form.get('time').errors.required">Se requiere seleccionar una hora</div>
            </div>
        </div>

        <div class="form-group">
            <label for="tagsSeleccionados">Tags:</label>
            <ng-select formControlName="tagsSeleccionados" [items]="tags" bindLabel="tag" placeholder="Seleccionar tags"
                appendTo="body" multiple="true" [(ngModel)]="actividad.tags"
                [ngClass]="{'is-invalid':form.get('tagsSeleccionados').touched && form.get('tagsSeleccionados').invalid}">
            </ng-select>
            <div *ngIf="form.get('tagsSeleccionados').touched && form.get('tagsSeleccionados').invalid" class="invalid-feedback">
                <div *ngIf="form.get('tagsSeleccionados').errors.required">Se requiere seleccionar al menos un tag</div>
            </div>
        </div>

        <button type="submit" class="btn btn-info" [disabled]="!form.valid">Agregar</button>
    </form>

</body>